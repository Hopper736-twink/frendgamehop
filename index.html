<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PartyGame –ò–≥—Ä–∞–±–µ–ª—å–Ω—ã–π</title>
<style>
*{box-sizing:border-box}
body{margin:0;height:100vh;font-family:system-ui,Arial;background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);color:#fff;display:flex;justify-content:center;align-items:center;}
#app{width:100%;max-width:420px;padding:20px;}
.card{background:rgba(255,255,255,.12);backdrop-filter:blur(14px);border-radius:22px;padding:20px;box-shadow:0 20px 40px rgba(0,0,0,.45);animation:fade .3s ease;}
h1,h2{text-align:center;margin-top:0}
button{width:100%;padding:14px;margin-top:12px;border:none;border-radius:16px;font-size:16px;background:#ff4ecd;color:white;cursor:pointer;transition:.2s;}
button:hover{transform:scale(1.04)}
input{width:100%;padding:14px;margin-top:12px;border-radius:16px;border:none;font-size:16px;}
.menu button{background:#6c63ff}
.small{opacity:.8;font-size:14px;text-align:center}
@keyframes fade{from{opacity:0;transform:translateY(10px)}to{opacity:1}}
</style>
</head>
<body>
<div id="app"></div>
<script>
const app=document.getElementById("app");

/* ====== –ú–ê–°–°–ò–í–´ –ò –ó–ê–ì–†–£–ó–ö–ê –ó–ê–î–ê–ù–ò–ô ====== */
let truths=[], dares=[];
const TASKS_URL="https://raw.githubusercontent.com/username/repo/main/tasks.json";
fetch(TASKS_URL)
.then(res=>res.json())
.then(data=>{truths=data.filter(t=>t.type==="truth").map(t=>t.text);dares=data.filter(t=>t.type==="dare").map(t=>t.text);console.log("–ó–∞–¥–∞–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã")})
.catch(err=>{console.error("–û—à–∏–±–∫–∞:",err);truths=["–ö—Ç–æ —Ç–µ–±–µ –Ω—Ä–∞–≤–∏—Ç—Å—è?"];dares=["–°–¥–µ–ª–∞–π —Å–º–µ—à–Ω–æ–µ –ª–∏—Ü–æ"]});

/* ====== –ú–ï–ù–Æ ====== */
function mainMenu(){
app.innerHTML=`
<div class="card menu">
<h1>üéâ PartyGame</h1>
<button onclick="truthMenu()">üé≠ –ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ</button>
<button onclick="spyMenu()">üïµÔ∏è –®–ø–∏–æ–Ω</button>
<button onclick="mafiaMenu()">ü©∏ –ú–∞—Ñ–∏—è</button>
<p class="small">–ü–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω –ø–æ –∫—Ä—É–≥—É</p>
</div>`;
}

/* ====== –ü–†–ê–í–î–ê –ò –î–ï–ô–°–¢–í–ò–ï ====== */
let players=[],fatigue={},turn=0;
function truthMenu(){
players=[];fatigue={};turn=0;
app.innerHTML=`
<div class="card">
<h2>–ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ</h2>
<input id="name" placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞">
<button onclick="addPlayer()">–î–æ–±–∞–≤–∏—Ç—å</button>
<div id="list" class="small"></div>
<button onclick="startTruth()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
<button onclick="mainMenu()">‚¨Ö –ù–∞–∑–∞–¥</button>
</div>`;
}
function addPlayer(){
const n=document.getElementById("name").value.trim();if(!n)return;
players.push(n);fatigue[n]=0;
document.getElementById("list").innerText=players.join(", ");
document.getElementById("name").value="";
}
function startTruth(){if(players.length<2)return alert("–ú–∏–Ω–∏–º—É–º 2 –∏–≥—Ä–æ–∫–∞");nextTurn();}
function nextTurn(extra=false){
const name=players[turn];
const isTruth=Math.random()<0.5;
const task=isTruth?truths[Math.floor(Math.random()*truths.length)]:dares[Math.floor(Math.random()*dares.length)];
app.innerHTML=`
<div class="card">
<h2>${name}</h2>
<p>${isTruth?"ü§î –ü—Ä–∞–≤–¥–∞":"üî• –î–µ–π—Å—Ç–≤–∏–µ"}</p>
<p>${task}</p>
<button onclick="done()">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</button>
<button onclick="skip()">–û—Ç–∫–∞–∑</button>
</div>`;
if(!extra)turn=(turn+1)%players.length;
}
function done(){nextTurn()}
function skip(){const name=players[(turn-1+players.length)%players.length];fatigue[name]++;if(fatigue[name]>=2){fatigue[name]=0;nextTurn(true);}else nextTurn();}

/* ====== –®–ü–ò–û–ù ====== */
let spyPlayers=[],spyTopic="",spyIndex=-1;
function spyMenu(){spyPlayers=[];spyTopic="";spyIndex=-1;
app.innerHTML=`
<div class="card">
<h2>üïµÔ∏è –®–ø–∏–æ–Ω</h2>
<input id="name" placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞">
<button onclick="addSpyPlayer()">–î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞</button>
<div id="list" class="small"></div>
<input id="topic" placeholder="–¢–µ–º–∞ (–∂–∏–≤–æ—Ç–Ω—ã–µ, –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏...)">
<button onclick="startSpy()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
<button onclick="mainMenu()">‚¨Ö –ù–∞–∑–∞–¥</button>
</div>`;
}
function addSpyPlayer(){const n=document.getElementById("name").value.trim();if(!n)return;spyPlayers.push(n);document.getElementById("list").innerText=spyPlayers.join(", ");document.getElementById("name").value="";}
function startSpy(){spyTopic=document.getElementById("topic").value.trim();if(spyPlayers.length<2||!spyTopic)return alert("–ò–≥—Ä–æ–∫–∏ –∏ —Ç–µ–º–∞ –Ω—É–∂–Ω—ã");spyIndex=Math.floor(Math.random()*spyPlayers.length);nextSpy();}
function nextSpy(){
const name=spyPlayers.shift();if(!name)name=spyPlayers[0];
if(spyPlayers.length===0){app.innerHTML=`<div class="card"><h2>–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</h2><button onclick="mainMenu()">‚¨Ö –ú–µ–Ω—é</button></div>`;return;}
const role=(spyPlayers.length===spyIndex)?"–®–ø–∏–æ–Ω":`–¢–µ–º–∞: ${spyTopic}`;
app.innerHTML=`<div class="card"><h2>${name}</h2><p>${role}</p><button onclick="nextSpy()">–°–ª–µ–¥—É—é—â–∏–π</button></div>`;
}

/* ====== –ú–ê–§–ò–Ø ====== */
let mafiaPlayers=[],mafiaRoles={},mafiaStage=0;
function mafiaMenu(){mafiaPlayers=[];mafiaRoles={};mafiaStage=0;
app.innerHTML=`
<div class="card">
<h2>ü©∏ –ú–∞—Ñ–∏—è</h2>
<input id="name" placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞">
<button onclick="addMafiaPlayer()">–î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞</button>
<div id="list" class="small"></div>
<button onclick="startMafia()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
<button onclick="mainMenu()">‚¨Ö –ù–∞–∑–∞–¥</button>
</div>`;
}
function addMafiaPlayer(){const n=document.getElementById("name").value.trim();if(!n)return;mafiaPlayers.push(n);document.getElementById("list").innerText=mafiaPlayers.join(", ");document.getElementById("name").value="";}
function startMafia(){if(mafiaPlayers.length<3)return alert("–ú–∏–Ω–∏–º—É–º 3 –∏–≥—Ä–æ–∫–∞");assignRoles();mafiaNight();}
function assignRoles(){mafiaRoles={};let mafiaCount=Math.floor(mafiaPlayers.length/3);for(let i=0;i<mafiaCount;i++){mafiaRoles[mafiaPlayers[i]]="–ú–∞—Ñ–∏—è";}for(let i=mafiaCount;i<mafiaPlayers.length;i++){mafiaRoles[mafiaPlayers[i]]="–ì–æ—Ä–æ–∂–∞–Ω–∏–Ω";}}
function mafiaNight(){
app.innerHTML=`<div class="card"><h2>–ù–æ—á—å</h2><p>–í—Å–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç –≥–ª–∞–∑–∞. –ú–∞—Ñ–∏—è –≤—ã–±–∏—Ä–∞–µ—Ç –∂–µ—Ä—Ç–≤—É.</p><button onclick="mafiaDay()">–î–µ–Ω—å</button></div>`;
}
function mafiaDay(){
let alive=mafiaPlayers.slice();let victim=alive[Math.floor(Math.random()*alive.length)];app.innerHTML=`<div class="card"><h2>–î–µ–Ω—å</h2><p>${victim} –±—ã–ª —É–±–∏—Ç!</p><button onclick="mafiaNight()">–ù–æ—á—å</button></div>`;
}

mainMenu();
</script>
</body>
</html>